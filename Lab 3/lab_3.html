<!DOCTYPE html> 
<html>
<head>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-image: url('https://raw.githubusercontent.com/AndreMarques2002/processamentoVideoLabs/main/Background.png');
            background-size: cover;
            text-transform: uppercase;
            font-weight: bold;
            margin: 0;
            overflow-x: hidden;
        }
        .header {
            width: 100%; 
            position: sticky;
            top: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #3a9793; 
            padding: 20px;
            box-shadow: 0 2px 4px 0 rgba(0,0,0,0.2);
            z-index: 1;
        }
        .logo {
            width: 100px;
        }
        .footer {
            width: 100%; 
            background-color: #3a9793; 
            text-align: center; 
            color: white;
            padding: 10px;
            bottom: 0;
            left: 0;
            z-index: 1;
        }
        .audio-player {
            position: absolute; 
            top: 150px; 
            right: 20px; 
        }
        .title {
            text-align: center; 
            margin-top: 20px; 
            color: white;
        }
        .section {
            margin: 20px; 
            color: white;
        }
        .normal-text {
            text-transform: none;
            text-align: justify;
        }
        
        .media-container {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            gap: 20px;
        }
        .media-content {
            text-align: center;
        }
        video {
            max-width: 100%;
            height: auto;
        }
        
        .image-container {
            display: flex;
            justify-content: space-around;
            align-items: flex-start;
            gap: 20px;
        }
        .image-content {
            text-align: center;
        }
        imgem {
            max-width: 100%;
            height: auto;
        }
        
        .media-content img,
        .media-content iframe {
            max-width: 100%;
        }
        .menu {
            display: flex;
            gap: 25px;
        }
        .menu-item {
            text-decoration: none;
            color: white;
            font-size: 20px;
        }
        .menu-item:hover {
            color: #006400;
        }
        .dropdown {
            position:relative; 
            display:inline-block; 
        }
        .dropdown-content {
            display:none; 
            position:absolute; 
            min-width: 160px; 
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2); 
            z-index: 1; 
            background-color: #3a9793;
            text-align: center; 
        }
        .dropdown-content a {
            color:white;
            padding: 12px 16px; 
            text-decoration: none; 
            display: block; 
            white-space: nowrap;
        }
        .dropdown-content a:hover {
            color: #006400; /* Cor verde escuro quando o cursor passa por cima */
        }
        .dropdown:hover .dropdown-content {
            display: block; 
        }
        .logo {
            width: 100px;
        }
        .code-container {
            background-color: #3b4252;
            border-radius: 5px;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        .code-container pre {
            margin: 0;
            font-family: 'Courier New', Courier, monospace;
            font-size: 14px;
        }
        .code-container code {
            color: #88c0d0;
        }
    </style>
    <title>Laboratório 3</title>
    <link rel="icon" href="https://raw.githubusercontent.com/AndreMarques2002/processamentoVideoLabs/main/ufabc_icon.png">
</head>
<body>
    <div class="header">
        <img src="https://raw.githubusercontent.com/AndreMarques2002/processamentoVideoLabs/main/ufabc_icon.png" alt="Logo UFABC" class="logo">
        
        <div class="menu">
            <a href="../index.html" class="menu-item">Home</a>
           
            <div class="dropdown">
                <a class="menu-item">Trabalhos</a>
                <div class="dropdown-content">
                    <a href="../Trabalho 1/trabalho_1.html">Trabalho T1</a>
                    <a href="../Trabalho 2/trabalho_2.html">Trabalho T2</a>
                    <a href="../Trabalho 3/trabalho_3.html">Trabalho T3</a>
                    <a href="../Trabalho 4/trabalho_4.html">Trabalho T4</a>
                    <a href="../Trabalho 5/trabalho_5.html">Trabalho T5</a>
                </div>
            </div>
           
            <div class="dropdown"> 
                <a class="menu-item">Relatórios</a>
                <div class="dropdown-content">
                    <a href="../Lab 1/lab_1.html">Laboratório 1</a>
                    <a href="../Lab 2/lab_2.html">Laboratório 2</a>
                    <a href="lab_3.html">Laboratório 3</a>
                    <a href="../Lab 4/lab_4.html">Laboratório 4</a>
                    <a href="../Lab 5/lab_5.html">Laboratório 5</a>
                </div>
            </div>
        </div>
    </div>

    <h1 class="title">Laboratório 3 - Espaço de Cores</h1>

    <div class="section">
        <h2>Introdução</h2>
        <p class="normal-text">
            O presente laboratório tem como objetivo ...
        </p>
        
        <br>

        <h2>Fundamentos básicos</h2>
        <p class="normal-text">
            Escrever ...
        </p>
        
        <br>

        <h2>Materiais e Métodos</h2>
        <h3>Lista de Materiais</h3>
            <ul>
                <li><p class="normal-text">Computador com o sistema opercional Linux 22.04 instalado</p></li>
                <li><p class="normal-text">Biblioteca OpenCV devidamente instalada</p></li>
                <li><p class="normal-text">Webcam Microsoft</p></li>
                <li><p class="normal-text">Objetos coloridos (amarelo, verde e vermelho)</p></li>
            </ul>
        
        <br>
        
        <h2>Procedimentos Experimentais</h2>
        <p class="normal-text">
            (1) Estude a teoria de conversão de cores.Color conversions:
https://docs.opencv.org/4.x/de/d25/imgproc_color_conversions.html

Conversões mais usadas: RGB <-> GRAY, RGB <-> YCrCb, RGB <-> HSV, e Bayer -> RGB
		<p>
        
        
        <br>
        
        
        
        <p class="normal-text">
			(2) Estude este programa em que é realizada mudança do espaço RGB para HSV, e execute o programa com a webcam, e objetos coloridos. Adicionalmente, estude no programa a função inRange com atenção:
Thresholding Operations using inRange
https://docs.opencv.org/4.x/da/d97/tutorial_threshold_inRange.html

Analise a detecção de pelo menos três objetos coloridos, a faixa de valores HSV para cada caso, e o valor RGB correspondente.
		</p>
        
        
        <br>
        
        
		<p class="normal-text">
			(2.a) Modifique este programa para filtrar a imagem da de entrada da webcam, com um filtro gaussiano antes da conversão para o espaço HSV. Além disso, o programa deverá criar uma janela adicional, para mostrar a imagem não-filtrada e a imagem filtrada lado a lado.  Analise o efeito do filtro gaussiano, com pelo menos três objetos coloridos.
		</p>
        
        
        <br>
        
 
		<p class="normal-text">
        	(2.b) Elabore um novo programa (nova pasta), modificando programa feito no item (2.a) para  que a imagem filtrada seja submetido pelo detector CANNY.  Portanto, a equipe deverá primeiramente estudar o detector Canny.

https://docs.opencv.org/4.x/da/d5c/tutorial_canny_detector.html

Desta forma, o novo programa deverá criar uma janela adicional, para mostrar a imagem filtrada e a imagem do detector de CANNY. Analise a melhor configuração do detector Canny, com pelo menos três objetos coloridos.
		</p>
        
        <br>
        
        
		<p class="normal-text">
        	(2.c) Modifique o programa do item (2.b) para incluir a função de salvar a imagem das janelas  abertas ao toque da tecla [s], e a função de gravar videos das janelas com a tecla [k] para iniciar a gravação e com a tecla [h] para encerrar a gravação desses videos. Estes videos deverão demonstrar o rastreamento do movimento de objetos coloridos.  Analise estes videos.
		</p>
        
        
        <br>
        
        
        <p class="normal-text">
(3) Exercício em equipe:
Elaborar um programa para encontrar e extrair mais de um objeto colorido numa imagem, por exemplo, extraia objetos vermelhos, azuis e verdes simultaneamente (ou qualquer outras combinações de cores).
        </p>

        <br>
        
        <h2>Resultados e Análises</h2>
        <p class="normal-text">
        	Amarelo
        	<ul>
              <li><p class="normal-text">Low H = 20</p></li>
              <li><p class="normal-text">High H = 84</p></li>
              <li><p class="normal-text">Low S = 100</p></li>
              <li><p class="normal-text">High S = 255</p></li>
              <li><p class="normal-text">Low V = 100</p></li>
              <li><p class="normal-text">High V = 255</p></li>
          	</ul>
        </p>
        
        <p class="normal-text">
            Verde
            <ul>
              <li><p class="normal-text">Low H = 35</p></li>
              <li><p class="normal-text">High H = 130</p></li>
              <li><p class="normal-text">Low S = 48</p></li>
              <li><p class="normal-text">High S = 197</p></li>
              <li><p class="normal-text">Low V = 33</p></li>
              <li><p class="normal-text">High V = 255</p></li>
          	</ul>
        </p>
        
        <p class="normal-text">
            Vermelho
            <ul>
              <li><p class="normal-text">Low H = 0</p></li>
              <li><p class="normal-text">High H = 10</p></li>
              <li><p class="normal-text">Low S = 100</p></li>
              <li><p class="normal-text">High S = 255</p></li>
              <li><p class="normal-text">Low V = 100</p></li>
              <li><p class="normal-text">High V = 255</p></li>
			</ul>
        </p>
        
        <br>
        
        
        <h3>Parte 3</h3>
        
        <div class="code-container">
		<pre><code>
// Include Libraries        
#include &lt;opencv2/opencv.hpp&gt;
#include &lt;iostream&gt;

using namespace cv;
using namespace std;

// Janela para captura de vídeo e exibição
const String window_capture_name = "Video Capture";
const String window_detection_name = "Object Detection";

// Faixas de HSV para cores diferentes
int low_H_yellow = 20, low_S_yellow = 100, low_V_yellow = 100;
int high_H_yellow = 84, high_S_yellow = 255, high_V_yellow = 255;

int low_H_green = 35, low_S_green = 48, low_V_green = 33;
int high_H_green = 130, high_S_green = 197, high_V_green = 255;

int low_H_red1 = 0, low_S_red1 = 100, low_V_red1 = 100;
int high_H_red1 = 10, high_S_red1 = 255, high_V_red1 = 255;

int low_H_red2 = 170, low_S_red2 = 100, low_V_red2 = 100;
int high_H_red2 = 180, high_S_red2 = 255, high_V_red2 = 255;

int main(int argc, char* argv[])
{
    // Captura de vídeo (por padrão, usa a webcam)
    VideoCapture cap(argc > 1 ? atoi(argv[1]) : 0);
    if (!cap.isOpened()) {
        cout << "Erro ao abrir a câmera!" << endl;
        return -1;
    }

    // Criação de janelas
    namedWindow(window_capture_name);
    namedWindow(window_detection_name);

    Mat frame, frame_HSV, mask_yellow, mask_green, mask_red1, mask_red2, mask_red, mask_combined;

    while (true) {
        // Captura o frame
        cap >> frame;
        if (frame.empty()) {
            cout << "Fim do vídeo." << endl;
            break;
        }

        // Converte o frame de BGR para HSV
        cvtColor(frame, frame_HSV, COLOR_BGR2HSV);

        // Criação das máscaras para cada cor
        inRange(frame_HSV, Scalar(low_H_yellow, low_S_yellow, low_V_yellow), Scalar(high_H_yellow, high_S_yellow, high_V_yellow), mask_yellow);
        inRange(frame_HSV, Scalar(low_H_green, low_S_green, low_V_green), Scalar(high_H_green, high_S_green, high_V_green), mask_green);
        inRange(frame_HSV, Scalar(low_H_red1, low_S_red1, low_V_red1), Scalar(high_H_red1, high_S_red1, high_V_red1), mask_red1);
        inRange(frame_HSV, Scalar(low_H_red2, low_S_red2, low_V_red2), Scalar(high_H_red2, high_S_red2, high_V_red2), mask_red2);

        // Combina as duas faixas de vermelho
        mask_red = mask_red1 | mask_red2;

        // Combina todas as máscaras (amarelo, verde e vermelho)
        mask_combined = mask_yellow | mask_green | mask_red;

        // Mostrar os frames originais e a detecção combinada
        imshow(window_capture_name, frame);
        imshow(window_detection_name, mask_combined);

        // Pressione 'q' ou 'ESC' para sair
        char key = (char)waitKey(30);
        if (key == 'q' || key == 27) {
            break;
        }
    }
    return 0;
}
		</code></pre>
      	</div>
        
        
        <div class="image-container">
        <div class="image-content">
            <p>Objetos amarelo, verde e vermelho</p>
            <img src="https://raw.githubusercontent.com/AndreMarques2002/LabProcessamentoVideo/main/Lab%203/Parte%203/Objetos_parte_3.jpg">
        </div>
    	</div>
        
      
        <h2>Conclusões e Comentários Finais</h2>
        <p class="normal-text">
        	Escrever ...
        </p>
        
    </div>

    <div class="footer">
        <p>PROCESSAMENTO DE VÍDEO</p>
    </div>
</body>
</html>
